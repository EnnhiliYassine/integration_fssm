<!DOCTYPE html>
<html lang="fr">
<head>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-3JLZ805P6F"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-3JLZ805P6F');
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 640 512'><path fill='%23003366' d='M320 32c-8.1 0-16.1 1.4-23.7 4.1L15.8 137.4C6.3 140.9 0 149.9 0 160s6.3 19.1 15.8 22.6l57.9 20.9C57.3 229.3 48 259.8 48 291.9v4.2c0 17.9 10.6 33.9 26.2 41.2l142.6 66.8c12.3 5.8 26.3 5.8 38.6 0l142.6-66.8c15.6-7.3 26.2-23.3 26.2-41.2v-4.2c0-32.1-9.3-62.6-25.7-88.4l57.9-20.9c9.5-3.4 15.8-12.5 15.8-22.6s-6.3-19.1-15.8-22.6L343.7 36.1C336.1 33.4 328.1 32 320 32zM128 408c0 35.3 86 72 192 72s192-36.7 192-72L496.7 262.6 354.5 329c-11.1 5.2-23.9 5.2-35 0L177.3 262.6 128 408z'/></svg>">
  <title>Redimensionner Image - Integration FSSM</title>
  
  <!-- CSS -->
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="assets/css/style_slider.css">
  
  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  
  <style>
    .resize-container {
      max-width: 1000px;
      margin: 120px auto 60px;
      padding: 40px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }
    
    .resize-header {
      text-align: center;
      margin-bottom: 40px;
    }
    
    .resize-header h1 {
      color: var(--primary-color);
      font-size: 2.5rem;
      margin-bottom: 15px;
      font-weight: 700;
    }
    
    .resize-header p {
      color: var(--text-color);
      font-size: 1.1rem;
      opacity: 0.8;
    }
    
    .upload-section {
      background: linear-gradient(135deg, #f8f9fa, #e9ecef);
      border: 2px dashed var(--primary-color);
      border-radius: 12px;
      padding: 40px;
      text-align: center;
      margin-bottom: 30px;
      transition: all 0.3s ease;
    }
    
    .upload-section:hover {
      border-color: var(--secondary-color);
      background: linear-gradient(135deg, #fff3cd, #ffeaa7);
    }
    
    .upload-section i {
      font-size: 3rem;
      color: var(--primary-color);
      margin-bottom: 20px;
    }
    
    .file-input-wrapper {
      position: relative;
      display: inline-block;
    }
    
    .file-input {
      position: absolute;
      opacity: 0;
      width: 100%;
      height: 100%;
      cursor: pointer;
    }
    
    .file-input-btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 15px 30px;
      background: var(--primary-color);
      color: white;
      border: none;
      border-radius: 25px;
      font-size: 1.1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .file-input-btn:hover {
      background: var(--secondary-color);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    
    .controls-section {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
      margin-bottom: 30px;
    }
    
    .control-group {
      background: #f8f9fa;
      padding: 25px;
      border-radius: 12px;
      border-left: 4px solid var(--primary-color);
    }
    
    .control-group h3 {
      color: var(--primary-color);
      margin-bottom: 20px;
      font-size: 1.2rem;
    }
    
    .input-group {
      margin-bottom: 15px;
    }
    
    .input-group label {
      display: block;
      margin-bottom: 8px;
      color: var(--text-color);
      font-weight: 500;
    }
    
    .input-group input {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #e9ecef;
      border-radius: 8px;
      font-size: 1rem;
      transition: border-color 0.3s ease;
    }
    
    .input-group input:focus {
      outline: none;
      border-color: var(--primary-color);
    }
    
    .preset-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    
    .preset-btn {
      padding: 8px 15px;
      background: white;
      border: 2px solid var(--primary-color);
      color: var(--primary-color);
      border-radius: 20px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .preset-btn:hover {
      background: var(--primary-color);
      color: white;
    }
    
    .action-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 30px;
    }
    
    .action-btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 15px 30px;
      border: none;
      border-radius: 25px;
      font-size: 1.1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
    }
    
    .btn-primary {
      background: var(--primary-color);
      color: white;
    }
    
    .btn-primary:hover {
      background: var(--secondary-color);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }
    
    .btn-success {
      background: #28a745;
      color: white;
    }
    
    .btn-success:hover {
      background: #218838;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
    }
    
    .canvas-container {
      text-align: center;
      background: #f8f9fa;
      padding: 30px;
      border-radius: 12px;
      border: 1px solid #e9ecef;
    }
    
    .canvas-container h3 {
      color: var(--primary-color);
      margin-bottom: 20px;
    }
    
    #canvas {
      max-width: 100%;
      border: 2px solid var(--primary-color);
      border-radius: 8px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }
    
    .image-info {
      margin-top: 15px;
      padding: 15px;
      background: white;
      border-radius: 8px;
      display: none;
    }
    
    .info-item {
      display: inline-block;
      margin: 0 15px;
      color: var(--text-color);
    }
    
    .info-item strong {
      color: var(--primary-color);
    }
    
    @media (max-width: 768px) {
      .controls-section {
        grid-template-columns: 1fr;
      }
      
      .action-buttons {
        flex-direction: column;
        align-items: center;
      }
      
      .preset-buttons {
        justify-content: center;
      }
    }
  </style>
</head>

<body>
  <!-- Header -->
  <header class="header" data-header>
    <div class="container">
      <h1 class="logo">
        <a href="index.html">Integration <span>FSSM</span></a>
      </h1>

      <div class="menu-toggle" id="menuToggle">
        <span class="bar"></span>
        <span class="bar"></span>
        <span class="bar"></span>
      </div>

      <nav class="navbar" data-navbar>
        <ul class="navbar-list">
          <li><a href="index.html#home" class="navbar-link">Acceuil</a></li>
          <li><a href="index.html#about" class="navbar-link">À propos</a></li>
          <li><a href="index.html#clubs" class="navbar-link">Clubs</a></li>
          <li><a href="index.html#comite" class="navbar-link">Direction</a></li>
          <li><a href="index.html#contact" class="navbar-link">Contact</a></li>
          <li><a href="resize.html" class="navbar-link" style="color: var(--secondary-color);">Redimensionner</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <div class="resize-container">
      <div class="resize-header">
        <h1><i class="fas fa-expand-arrows-alt"></i> Redimensionner Image</h1>
        <p>Redimensionnez facilement vos images pour les adapter à vos besoins</p>
      </div>

      <div class="upload-section">
        <i class="fas fa-cloud-upload-alt"></i>
        <h3>Sélectionner une image</h3>
        <p>Choisissez une image à redimensionner (JPG, PNG, GIF)</p>
        <div class="file-input-wrapper">
          <input type="file" id="imageInput" accept="image/*" class="file-input">
          <button class="file-input-btn">
            <i class="fas fa-upload"></i>
            Choisir une image
          </button>
        </div>
      </div>

      <div class="controls-section">
        <div class="control-group">
          <h3><i class="fas fa-ruler-combined"></i> Dimensions personnalisées</h3>
          <div class="input-group">
            <label for="width">Largeur (px):</label>
            <input type="number" id="width" value="300" min="1" max="5000">
          </div>
          <div class="input-group">
            <label for="height">Hauteur (px):</label>
            <input type="number" id="height" value="300" min="1" max="5000">
          </div>
          <div class="input-group">
            <label>
              <input type="checkbox" id="maintainRatio" checked> Maintenir les proportions
            </label>
          </div>
        </div>

        <div class="control-group">
          <h3><i class="fas fa-magic"></i> Tailles prédéfinies</h3>
          <div class="preset-buttons">
            <button class="preset-btn" onclick="setPreset(150, 150)">Avatar 150x150</button>
            <button class="preset-btn" onclick="setPreset(300, 300)">Profil 300x300</button>
            <button class="preset-btn" onclick="setPreset(800, 600)">Web 800x600</button>
            <button class="preset-btn" onclick="setPreset(1200, 800)">HD 1200x800</button>
            <button class="preset-btn" onclick="setPreset(1920, 1080)">Full HD</button>
          </div>
        </div>
      </div>

      <div class="action-buttons">
        <button class="action-btn btn-primary" onclick="resizeImage()">
          <i class="fas fa-compress-arrows-alt"></i>
          Redimensionner
        </button>
        <button class="action-btn btn-success" onclick="resizeAndDownload()">
          <i class="fas fa-download"></i>
          Redimensionner et Télécharger
        </button>
        <button class="action-btn btn-success" onclick="downloadImage()" id="downloadBtn" style="display: none;">
          <i class="fas fa-download"></i>
          Télécharger seulement
        </button>
      </div>

      <div class="canvas-container">
        <h3>Aperçu de l'image redimensionnée</h3>
        <canvas id="canvas"></canvas>
        <div class="image-info" id="imageInfo">
          <div class="info-item">
            <strong>Taille originale:</strong> <span id="originalSize">-</span>
          </div>
          <div class="info-item">
            <strong>Nouvelle taille:</strong> <span id="newSize">-</span>
          </div>
          <div class="info-item">
            <strong>Taille fichier:</strong> <span id="fileSize">-</span>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-logo">
          <h1 class="logo">
            <a href="index.html">Semaine d'<span>Intégration</span></a>
          </h1>
        </div>
        <div class="footer-right">
          <p>&copy; 2025 Semaine d'Intégration FSSM. Tous droits réservés.</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
  <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <script src="assets/js/script.js"></script>

  <script>
    let originalImage = new Image();
    let originalAspectRatio = 1;
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const imageInfo = document.getElementById('imageInfo');
    const downloadBtn = document.getElementById('downloadBtn');

    document.getElementById('imageInput').addEventListener('change', function(e) {
      const file = e.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(evt) {
          originalImage.onload = () => {
            originalAspectRatio = originalImage.width / originalImage.height;
            
            // Update original size display
            document.getElementById('originalSize').textContent = `${originalImage.width} x ${originalImage.height}`;
            
            // Set initial dimensions based on original image
            const maxSize = 800;
            let newWidth, newHeight;
            
            if (originalImage.width > originalImage.height) {
              newWidth = Math.min(originalImage.width, maxSize);
              newHeight = Math.round(newWidth / originalAspectRatio);
            } else {
              newHeight = Math.min(originalImage.height, maxSize);
              newWidth = Math.round(newHeight * originalAspectRatio);
            }
            
            document.getElementById('width').value = newWidth;
            document.getElementById('height').value = newHeight;
            
            resizeImage();
            imageInfo.style.display = 'block';
          };
          originalImage.src = evt.target.result;
        };
        reader.readAsDataURL(file);
      }
    });

    // Maintain aspect ratio functionality
    document.getElementById('width').addEventListener('input', function() {
      if (document.getElementById('maintainRatio').checked && originalAspectRatio) {
        const newHeight = Math.round(this.value / originalAspectRatio);
        document.getElementById('height').value = newHeight;
      }
    });

    document.getElementById('height').addEventListener('input', function() {
      if (document.getElementById('maintainRatio').checked && originalAspectRatio) {
        const newWidth = Math.round(this.value * originalAspectRatio);
        document.getElementById('width').value = newWidth;
      }
    });

    function setPreset(width, height) {
      document.getElementById('width').value = width;
      document.getElementById('height').value = height;
      if (originalImage.src) {
        resizeImage();
      }
    }

    function resizeImage() {
      if (!originalImage.src) {
        alert('Veuillez d\'abord sélectionner une image.');
        return;
      }

      const width = parseInt(document.getElementById('width').value);
      const height = parseInt(document.getElementById('height').value);
      
      if (width <= 0 || height <= 0) {
        alert('Les dimensions doivent être supérieures à 0.');
        return;
      }

      canvas.width = width;
      canvas.height = height;
      ctx.clearRect(0, 0, width, height);
      ctx.drawImage(originalImage, 0, 0, width, height);
      
      // Update display info
      document.getElementById('newSize').textContent = `${width} x ${height}`;
      
      // Estimate file size (rough approximation)
      const dataURL = canvas.toDataURL('image/png');
      const sizeInBytes = Math.round((dataURL.length - 'data:image/png;base64,'.length) * 3/4);
      const sizeInKB = Math.round(sizeInBytes / 1024);
      document.getElementById('fileSize').textContent = `~${sizeInKB} KB`;
      
      // Show download button
      downloadBtn.style.display = 'inline-flex';
    }

    function downloadImage() {
      if (!canvas.width || !canvas.height) {
        alert('Aucune image redimensionnée à télécharger.');
        return;
      }

      const link = document.createElement('a');
      const timestamp = new Date().toISOString().slice(0, 19).replace(/:/g, '-');
      link.download = `image-redimensionnee-${timestamp}.png`;
      link.href = canvas.toDataURL('image/png', 0.9);
      link.click();
    }

    function resizeAndDownload() {
      if (!originalImage.src) {
        alert('Veuillez d\'abord sélectionner une image.');
        return;
      }

      // First resize the image
      resizeImage();
      
      // Then automatically download it after a short delay
      setTimeout(() => {
        downloadImage();
      }, 500);
    }

    // File drag and drop functionality
    const uploadSection = document.querySelector('.upload-section');
    
    uploadSection.addEventListener('dragover', function(e) {
      e.preventDefault();
      this.style.borderColor = 'var(--secondary-color)';
      this.style.background = 'linear-gradient(135deg, #fff3cd, #ffeaa7)';
    });

    uploadSection.addEventListener('dragleave', function(e) {
      e.preventDefault();
      this.style.borderColor = 'var(--primary-color)';
      this.style.background = 'linear-gradient(135deg, #f8f9fa, #e9ecef)';
    });

    uploadSection.addEventListener('drop', function(e) {
      e.preventDefault();
      this.style.borderColor = 'var(--primary-color)';
      this.style.background = 'linear-gradient(135deg, #f8f9fa, #e9ecef)';
      
      const files = e.dataTransfer.files;
      if (files.length > 0 && files[0].type.startsWith('image/')) {
        document.getElementById('imageInput').files = files;
        document.getElementById('imageInput').dispatchEvent(new Event('change'));
      }
    });
  </script>

</body>
</html>